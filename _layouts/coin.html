---
layout: default
---

{% assign coin = site.data.coins | where: "code", page.code | first %}

<!-- Image Carousel -->
<div style="
  max-width: 320px;
  height: 320px;
  margin: 0 auto 30px;
  position: relative;
  overflow: hidden;
">
  <img id="coinCarousel"
       src="{{ '/assets/coins/' | append: coin.code | append: '/' | append: coin.images[0] | relative_url }}"
       alt="{{ coin.name }}"
       style="
         width: 100%;
         height: 100%;
         object-fit: contain;
         border-radius: 6px;
         box-shadow: 0 4px 8px rgba(0,0,0,0.1);
         transition: opacity 0.4s ease;
         position: absolute;
         top: 0;
         left: 0;
      ">

  <!-- Prev / Next arrows -->
  <button onclick="prevImage()" style="
      position: absolute;
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.4);
      color: white;
      font-size: 24px;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
  ">‚Äπ</button>

  <button onclick="nextImage()" style="
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.4);
      color: white;
      font-size: 24px;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
  ">‚Ä∫</button>
</div>
<!-- Dots for carousel -->
<div id="carouselDots" style="text-align:center;margin-top:10px;">
  {% for image in coin.images %}
    <span class="carousel-dot" data-index="{{ forloop.index0 }}" style="display:inline-block;width:10px;height:10px;margin:0 4px;border-radius:50%;background:#ccc;vertical-align:middle;cursor:pointer;"></span>
  {% endfor %}
</div>

<!-- Carousel Script -->
<script>
  const images = [
    {% for image in coin.images %}
      "{{ '/assets/coins/' | append: coin.code | append: '/' | append: image | relative_url }}"{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  const carousel = document.getElementById("coinCarousel");
  let current = 0;

  // Preload all images to prevent blinking
  const preloaded = [];
  images.forEach(src => {
    const img = new Image();
    img.src = src;
    preloaded.push(img);
  });

  // Dots
  const dots = document.querySelectorAll('.carousel-dot');
  function updateDots() {
    dots.forEach((dot, idx) => {
      dot.style.background = idx === current ? '#007bff' : '#ccc';
    });
  }
  updateDots();

  function showImage(index) {
    const nextIndex = (index + images.length) % images.length;
    if (nextIndex === current) return; // no change

    carousel.style.opacity = 0; // start fade-out
    setTimeout(() => {
      current = nextIndex;
      carousel.src = images[current]; // change after fade-out
      carousel.style.opacity = 1; // fade in
      updateDots();
    }, 200); // half of transition duration
  }

  function prevImage() { showImage(current - 1); }
  function nextImage() { showImage(current + 1); }

  // Make dots clickable
  dots.forEach((dot, idx) => {
    dot.addEventListener('click', () => showImage(idx));
  });

  // Swipe support for mobile
  let startX = 0;
  carousel.addEventListener('touchstart', e => startX = e.touches[0].clientX);
  carousel.addEventListener('touchend', e => {
    let diff = e.changedTouches[0].clientX - startX;
    if (Math.abs(diff) > 50) {  // swipe threshold
      if (diff > 0) prevImage(); else nextImage();
    }
  });
</script>

<!-- Descriptions -->
<div style="max-width: 800px; margin: 0 auto 30px; font-size: 16px; line-height: 1.5; color: #333;">
  {% if coin.descr1 %}<p>{{ coin.descr1 }}</p>{% endif %}
  {% if coin.descr2 %}<p>{{ coin.descr2 }}</p>{% endif %}
  {% if coin.descr3 %}<p>{{ coin.descr3 }}</p>{% endif %}
</div>

<!-- Characteristics Table -->
{% if coin.characteristics %}
  <h2 style="text-align:center; margin-top: 40px;">Characteristics</h2>
  <table style="margin: 20px auto; border-collapse: collapse; width: 90%; max-width: 600px;">
    {% for char in coin.characteristics %}
      <tr style="border-bottom: 1px solid #ccc;">
        <td style="padding: 8px; font-weight: bold;">{{ char[0] }}</td>
        <td style="padding: 8px;">{{ char[1] }}</td>
      </tr>
    {% endfor %}
  </table>
{% endif %}

<!-- Tags / Series -->
{% assign valid_tags = coin.tags | compact | reject: "" %}
{% if valid_tags and valid_tags.size > 0 %}
  <div style="text-align:center; margin: 30px 0;">
    <strong>Tags:</strong>
    {% for tag in valid_tags %}
      <span style="background: #eef; padding: 5px 10px; margin: 5px; border-radius: 12px; font-size: 14px;">
        {{ tag }}
      </span>
    {% endfor %}
  </div>
{% endif %}

<!-- PDF Link -->
{% if coin.pdf and coin.pdf != "" %}
  <p style="text-align:center; margin-top: 30px;">
    <a href="{{ '/assets/coins/' | append: coin.code | append: '/' | append: coin.pdf | relative_url }}"
       target="_blank"
       style="background: #007bff; color: #fff; padding: 10px 20px; border-radius: 5px; text-decoration:none;">
       üìÑ –ë—É–∫–ª–µ—Ç
    </a>
  </p>
{% endif %}

<!-- Navigation -->
{% assign coins = site.data.coins %}
{% assign current_index = -1 %}
{% for c in coins %}
  {% if c.code == page.code %}
    {% assign current_index = forloop.index0 %}
  {% endif %}
{% endfor %}

{% assign prev_index = current_index | minus: 1 %}
{% assign next_index = current_index | plus: 1 %}

{% if prev_index >= 0 %}
  {% assign prev_coin = coins[prev_index] %}
{% endif %}
{% if next_index < coins.size %}
  {% assign next_coin = coins[next_index] %}
{% endif %}

<div style="display: flex; justify-content: space-between; align-items: center; max-width: 800px; margin: 40px auto 0;">
  <div>
    {% if prev_coin %}
      <a href="{{ '/coins/' | append: prev_coin.code | relative_url }}" style="text-decoration: none;">‚Üê {{ prev_coin.name }}</a>
    {% endif %}
  </div>

  <!-- Counter -->
  <div style="font-weight: bold;">
    {{ current_index | plus: 1 }} of {{ coins.size }}
  </div>

  <div>
    {% if next_coin %}
      <a href="{{ '/coins/' | append: next_coin.code | relative_url }}" style="text-decoration: none;">{{ next_coin.name }} ‚Üí</a>
    {% endif %}
  </div>
</div>

<!-- Back link -->
<p style="text-align:center; margin-top: 40px;">
  <a href="{{ '/coins' | relative_url }}">‚Üê Back to Coin List</a>
</p>
